name: Guardian System (Risk & Black Swan)

on:
  schedule:
    # ğŸ›¡ é¢¨æ§ / æ–°èé›·é”ï¼ˆæ¯æ—¥ 4 æ¬¡å³å¯ï¼Œç©©å®šï¼‰
    - cron: '00 22 * * *'   # UTC 22:00ï¼ˆå°ç£ 06:00ï¼‰
    - cron: '00 00 * * *'   # UTC 00:00ï¼ˆå°ç£ 08:00ï¼‰
    - cron: '30 06 * * *'   # UTC 06:30ï¼ˆå°ç£ 14:30ï¼‰
    - cron: '00 12 * * *'   # UTC 12:00ï¼ˆå°ç£ 20:00ï¼‰

  workflow_dispatch:

jobs:
  guardian:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'

      - name: Install dependencies
        run: |
          cd repos/Quant-Guardian-Ultra
          pip install -r requirements.txt

      - name: Run Guardian System
        env:
          DISCORD_WEBHOOK_GENERAL: ${{ secrets.DISCORD_WEBHOOK_GENERAL }}
          DISCORD_WEBHOOK_BLACK_SWAN: ${{ secrets.DISCORD_WEBHOOK_BLACK_SWAN }}
        run: |
          cd repos/Quant-Guardian-Ultra
          python entrypoint.py
